# LinBPQ Configuration Files

This directory contains example configuration files for LinBPQ node software.

## Files

### bpq32.cfg
Example BPQ32 node configuration file with application definitions for the apps in this repository.

**Key sections:**
- `PORT` configuration with CMDPORT definitions
- `APPLICATION` definitions linking BPQ to the various applications
- User credentials and node settings

**Important notes:**
- CMDPORT positions (0-10) correspond to HOST numbers in APPLICATION lines
- Applications without NOCALL flag receive the user's callsign on stdin
- The 'S' flag strips SSID from callsigns
- The 'K' flag keeps the connection open after the application exits

### linmail.cfg.example
Example LinMail forwarding configuration for automatically importing messages from the forms.py application.

**Purpose:** Enables automatic import of completed forms into the BPQ BBS mail queue.

**How to use:**
1. Access BPQ32 web interface (typically http://localhost:8080)
2. Navigate to: **Mail Management → Forwarding Configuration**
3. Create a new forwarding record using your BBS callsign
4. Set ConnectScript to: `IMPORT infile DELETE`
5. Configure FwdInterval based on your needs:
   - **Active incident/net**: 300 seconds (5 minutes)
   - **Normal operations**: 900-1800 seconds (15-30 minutes)
   - **Low activity**: 3600 seconds (60 minutes)

**Important:** Do not manually edit linmail.cfg - it's auto-generated by the BPQ web UI. This .example file is for reference only.

## Application Port Mapping

Based on the bpq32.cfg example, here's how ports map to applications:

| Port  | Position | Application | Description |
|-------|----------|-------------|-------------|
| 63000 | 0 | FORTUNE | Fortune cookie display |
| 63010 | 1 | WX | Weather reports |
| 63020 | 2 | SYSINFO | System information |
| 63030 | 3 | CALLOUT | Callsign test |
| 63040 | 4 | SPACE | Space weather |
| 63050 | 5 | BANDS | Band conditions |
| 63060 | 6 | QRZ | QRZ lookups |
| 63070 | 7 | GOPHER | Gopher browser |
| 63080 | 8 | NEWS | RSS news reader |
| 63090 | 9 | TEST | Ham license test |
| 63100 | 10 | FORMS | Fillable forms system |

## Forms Import System

The forms.py application writes completed forms to `linbpq/infile` in BPQ message format.

**Message flow:**
1. User fills out form via forms.py application
2. Form is appended to `linbpq/infile`
3. BPQ periodically runs `IMPORT infile DELETE` (configured in linmail.cfg)
4. Messages are imported into BBS mail queue
5. infile is deleted after successful import
6. BPQ delivers messages to recipients

**Manual import:** Use the BPQ web UI: **Actions → Import Messages**

## Configuration Tips

### Security
- Change default passwords in bpq32.cfg
- Use SYSOP flag only for authorized users
- Consider firewall rules for exposed ports

### Performance
- Adjust MAXSESSIONS based on system resources
- Set appropriate FwdInterval for your activity level
- Monitor LOGGING output for issues

### Testing
- Test applications individually before connecting to BPQ
- Use shorter FwdInterval (60 seconds) during testing
- Check infile manually before configuring auto-import

## Related Documentation

- **Main README**: ../README.md
- **Apps README**: ../apps/README.md
- **Forms README**: ../apps/forms/README.md
- **BPQ Documentation**: https://www.cantab.net/users/john.wiseman/Documents/
- **Import/Export Guide**: https://www.cantab.net/users/john.wiseman/Documents/ImportExport.html
