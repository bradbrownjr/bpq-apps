# -*- coding: utf-8 -*-
"""
Simplified US State and County Boundaries for Offline Maps
----------------------------------------------------------
Coordinates are simplified/generalized to reduce file size.
Only includes northeastern US states relevant to Maine packet network.

Data source: Simplified from US Census TIGER/Line files
Coordinates: [lon, lat] pairs (GeoJSON convention)
"""

# Simplified state boundary polygons (lon, lat pairs)
# These are heavily simplified - ~20-50 points per state instead of thousands
STATE_BOUNDARIES = {
    'ME': {
        'name': 'Maine',
        'coords': [
            [-71.08, 45.31], [-70.96, 45.33], [-70.65, 45.46], [-70.72, 45.51],
            [-70.40, 45.73], [-70.42, 45.94], [-70.24, 46.15], [-70.06, 46.42],
            [-69.24, 47.44], [-69.05, 47.43], [-69.04, 47.25], [-68.90, 47.18],
            [-68.24, 47.35], [-67.79, 47.07], [-67.79, 45.94], [-67.75, 45.68],
            [-67.45, 45.60], [-67.42, 45.51], [-67.50, 45.49], [-67.43, 45.38],
            [-67.48, 45.28], [-67.35, 45.13], [-67.27, 45.17], [-67.13, 45.14],
            [-66.97, 44.83], [-67.00, 44.65], [-66.96, 44.45], [-67.19, 44.34],
            [-67.57, 44.14], [-67.88, 44.04], [-68.06, 44.05], [-68.30, 44.26],
            [-68.57, 44.30], [-68.81, 44.46], [-69.06, 44.10], [-69.24, 43.98],
            [-69.51, 43.84], [-69.55, 43.88], [-69.72, 43.79], [-69.87, 43.77],
            [-69.97, 43.79], [-70.10, 43.67], [-70.21, 43.63], [-70.33, 43.55],
            [-70.54, 43.34], [-70.64, 43.13], [-70.70, 43.07], [-70.82, 43.12],
            [-70.82, 43.24], [-70.97, 43.37], [-70.97, 43.53], [-71.03, 44.22],
            [-71.02, 44.43], [-71.03, 45.30], [-71.08, 45.31]
        ]
    },
    'NH': {
        'name': 'New Hampshire',
        'coords': [
            [-71.03, 45.30], [-71.02, 44.43], [-71.03, 44.22], [-70.97, 43.53],
            [-70.97, 43.37], [-70.82, 43.24], [-70.82, 43.12], [-70.93, 43.10],
            [-71.02, 43.14], [-71.25, 43.28], [-71.29, 43.43], [-71.55, 43.62],
            [-71.58, 43.87], [-71.65, 43.92], [-71.59, 44.08], [-71.50, 44.21],
            [-71.54, 44.33], [-71.66, 44.42], [-71.79, 44.42], [-71.87, 44.35],
            [-72.00, 44.33], [-72.05, 44.23], [-72.07, 44.18], [-72.04, 44.09],
            [-72.11, 43.97], [-72.20, 43.81], [-72.30, 43.70], [-72.33, 43.61],
            [-72.38, 43.52], [-72.40, 43.35], [-72.44, 43.29], [-72.45, 43.16],
            [-72.47, 43.03], [-72.46, 42.73], [-71.93, 42.71], [-71.29, 42.70],
            [-71.24, 42.74], [-71.13, 42.82], [-71.03, 42.86], [-70.97, 42.87],
            [-70.82, 42.87], [-70.82, 43.12], [-70.93, 43.10], [-71.03, 45.30]
        ]
    },
    'VT': {
        'name': 'Vermont',
        'coords': [
            [-73.35, 45.01], [-73.18, 45.01], [-72.55, 45.01], [-72.10, 45.01],
            [-71.50, 45.01], [-71.50, 44.98], [-71.54, 44.33], [-71.66, 44.42],
            [-71.79, 44.42], [-71.87, 44.35], [-72.00, 44.33], [-72.05, 44.23],
            [-72.07, 44.18], [-72.04, 44.09], [-72.11, 43.97], [-72.20, 43.81],
            [-72.30, 43.70], [-72.33, 43.61], [-72.38, 43.52], [-72.40, 43.35],
            [-72.44, 43.29], [-72.45, 43.16], [-72.47, 43.03], [-72.53, 42.96],
            [-72.54, 42.86], [-72.82, 42.82], [-73.02, 42.74], [-73.27, 42.75],
            [-73.29, 42.80], [-73.26, 42.87], [-73.28, 43.07], [-73.25, 43.21],
            [-73.29, 43.32], [-73.38, 43.58], [-73.41, 43.64], [-73.38, 43.80],
            [-73.36, 44.05], [-73.33, 44.23], [-73.39, 44.42], [-73.33, 44.54],
            [-73.30, 44.76], [-73.35, 44.90], [-73.35, 45.01]
        ]
    },
    'MA': {
        'name': 'Massachusetts',
        'coords': [
            [-73.27, 42.75], [-73.02, 42.74], [-72.82, 42.82], [-72.54, 42.86],
            [-72.53, 42.96], [-72.47, 43.03], [-72.46, 42.73], [-71.93, 42.71],
            [-71.29, 42.70], [-71.24, 42.74], [-71.13, 42.82], [-71.03, 42.86],
            [-70.97, 42.87], [-70.82, 42.87], [-70.64, 42.68], [-70.85, 42.55],
            [-70.92, 42.47], [-70.80, 42.25], [-70.60, 42.02], [-70.54, 41.93],
            [-70.53, 41.78], [-70.00, 41.83], [-69.94, 41.68], [-69.98, 41.50],
            [-70.07, 41.53], [-70.24, 41.63], [-70.49, 41.56], [-70.60, 41.55],
            [-70.65, 41.54], [-70.68, 41.51], [-70.84, 41.50], [-70.89, 41.60],
            [-71.00, 41.51], [-71.12, 41.49], [-71.13, 41.66], [-71.19, 41.68],
            [-71.22, 41.71], [-71.26, 41.75], [-71.34, 41.80], [-71.38, 42.02],
            [-71.38, 42.24], [-71.50, 42.27], [-71.80, 42.01], [-71.80, 42.02],
            [-72.10, 42.03], [-72.53, 42.03], [-72.57, 42.03], [-73.05, 42.04],
            [-73.23, 42.05], [-73.49, 42.05], [-73.51, 42.08], [-73.27, 42.75]
        ]
    },
    'CT': {
        'name': 'Connecticut',
        'coords': [
            [-73.49, 42.05], [-73.23, 42.05], [-73.05, 42.04], [-72.57, 42.03],
            [-72.53, 42.03], [-72.10, 42.03], [-71.80, 42.02], [-71.80, 42.01],
            [-71.79, 41.42], [-71.84, 41.34], [-71.86, 41.32], [-72.09, 41.27],
            [-72.33, 41.14], [-72.53, 41.04], [-72.90, 41.01], [-73.18, 41.15],
            [-73.22, 41.13], [-73.48, 41.21], [-73.55, 41.29], [-73.58, 41.02],
            [-73.73, 40.99], [-73.73, 41.11], [-73.72, 41.24], [-73.65, 41.02],
            [-73.64, 40.98], [-73.62, 40.99], [-73.49, 42.05]
        ]
    },
    'RI': {
        'name': 'Rhode Island',
        'coords': [
            [-71.79, 41.42], [-71.80, 42.01], [-71.50, 42.02], [-71.38, 42.02],
            [-71.34, 41.80], [-71.26, 41.75], [-71.22, 41.71], [-71.19, 41.68],
            [-71.13, 41.66], [-71.12, 41.49], [-71.21, 41.46], [-71.34, 41.45],
            [-71.42, 41.48], [-71.42, 41.42], [-71.52, 41.38], [-71.79, 41.42]
        ]
    },
    'NY': {
        'name': 'New York',
        'coords': [
            [-79.76, 43.27], [-79.45, 43.45], [-79.04, 43.27], [-78.72, 43.35],
            [-77.73, 43.34], [-76.82, 43.64], [-76.44, 44.10], [-76.17, 44.28],
            [-75.45, 44.87], [-74.87, 44.98], [-74.73, 45.01], [-73.35, 45.01],
            [-73.35, 44.90], [-73.30, 44.76], [-73.33, 44.54], [-73.39, 44.42],
            [-73.33, 44.23], [-73.36, 44.05], [-73.38, 43.80], [-73.41, 43.64],
            [-73.38, 43.58], [-73.29, 43.32], [-73.25, 43.21], [-73.28, 43.07],
            [-73.26, 42.87], [-73.29, 42.80], [-73.27, 42.75], [-73.51, 42.08],
            [-73.49, 42.05], [-73.62, 40.99], [-74.25, 41.14], [-74.10, 41.34],
            [-74.37, 41.59], [-74.70, 41.49], [-74.76, 41.43], [-74.90, 41.33],
            [-75.05, 41.51], [-75.10, 41.62], [-75.27, 41.94], [-75.36, 42.00],
            [-79.76, 42.00], [-79.76, 42.52], [-79.76, 43.27]
        ]
    }
}

# Selected Maine county boundaries (simplified)
# Format: county_name -> list of [lon, lat] coordinates
MAINE_COUNTIES = {
    'Cumberland': {
        'coords': [
            [-70.70, 43.93], [-70.55, 43.84], [-70.33, 43.91], [-70.21, 43.78],
            [-70.14, 43.76], [-70.03, 43.79], [-69.97, 43.79], [-70.10, 43.92],
            [-70.08, 44.09], [-70.22, 44.19], [-70.48, 44.22], [-70.55, 44.19],
            [-70.72, 44.06], [-70.70, 43.93]
        ]
    },
    'York': {
        'coords': [
            [-70.97, 43.53], [-70.97, 43.37], [-70.82, 43.24], [-70.82, 43.12],
            [-70.70, 43.07], [-70.64, 43.13], [-70.54, 43.34], [-70.33, 43.55],
            [-70.21, 43.63], [-70.14, 43.76], [-70.21, 43.78], [-70.33, 43.91],
            [-70.55, 43.84], [-70.70, 43.93], [-70.72, 44.06], [-70.80, 44.04],
            [-70.98, 43.79], [-70.97, 43.53]
        ]
    },
    'Androscoggin': {
        'coords': [
            [-70.48, 44.22], [-70.22, 44.19], [-70.08, 44.09], [-70.08, 44.35],
            [-70.16, 44.42], [-70.31, 44.43], [-70.48, 44.38], [-70.48, 44.22]
        ]
    },
    'Kennebec': {
        'coords': [
            [-70.08, 44.35], [-69.75, 44.25], [-69.55, 44.34], [-69.55, 44.62],
            [-69.62, 44.69], [-69.75, 44.82], [-70.03, 44.83], [-70.16, 44.75],
            [-70.16, 44.42], [-70.08, 44.35]
        ]
    },
    'Penobscot': {
        'coords': [
            [-69.22, 44.87], [-68.55, 44.87], [-68.38, 45.10], [-68.38, 45.56],
            [-68.43, 45.82], [-68.96, 46.05], [-69.22, 46.05], [-69.35, 45.75],
            [-69.45, 45.35], [-69.35, 45.05], [-69.22, 44.87]
        ]
    }
}


def get_state_boundaries():
    """Return dictionary of state boundaries."""
    return STATE_BOUNDARIES


def get_maine_counties():
    """Return dictionary of Maine county boundaries."""
    return MAINE_COUNTIES


def get_states_in_bounds(min_lat, max_lat, min_lon, max_lon):
    """Return list of state codes that overlap with given bounds."""
    states = []
    for code, data in STATE_BOUNDARIES.items():
        coords = data['coords']
        state_lons = [c[0] for c in coords]
        state_lats = [c[1] for c in coords]
        
        # Check if state bbox overlaps with requested bbox
        if (min(state_lons) <= max_lon and max(state_lons) >= min_lon and
            min(state_lats) <= max_lat and max(state_lats) >= min_lat):
            states.append(code)
    
    return states
